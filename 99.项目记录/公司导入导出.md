以下接口都需要添加 token, 并依赖于"编辑客户详情" 的权限 `company_edit`

## 一. 分页查看列表, get请求

两个可选分页参数

- page 当前页, 默认1
- pageSize 每页条数, 默认10 

### 1. 查看总任务列表, 分页

> /company/import/logPager

只要 page, pageSize 两个分页参数

```json
"list": [
    {
        "result": "处理中",
        "fail": 3,
        "batchNo": "808feeb37fe34a8096de7769007411bb",
        "importType": 2,
        "createBy": "罗雁夫",
        "createTime": "2019-11-14 11:35:16",
        "success": 1
    },
    {
        "result": "已完成",
        "fail": 1,
        "batchNo": "d937946fd830413db12b3f710d5ddcdf",
        "importType": 2,
        "createBy": "罗雁夫",
        "createTime": "2019-11-14 11:21:15",
        "success": 0
    },
    {
        "result": "已完成",
        "fail": 2,
        "batchNo": "0b1da32419284025a59d7f6c4b52ddee",
        "importType": 1,
        "createBy": "罗雁夫",
        "createTime": "2019-11-14 16:51:31",
        "success": 6,
        "importFile": "594cd0bc5bef4675933fc07e5b711210"
    }]
```

- **result** : 处理状态, 处理中/已完成 两种状态
- **fail** : 失败的公司数量
- **success** : 成功的公司数量
- **batch_no** : 该次导入任务的批次号
- **import_type** : 导入类型 1=excel, 2=文本框
- **import_file** : excel导入时, 有源文件的编号, 可以忽略

### 2. 查看成功的公司, 分页

> /company/import/successPager

除分页参数外, 还需要 batchNo=导入任务的批次号, 必要

```json
{
    "id": 527,
    "batchNo": "052b7b3e72c74d33bcdc69ac1fc5f98d",
    "importType": 2,
    "companyName": "河南旺仕达电子科技有限公司",
    "status": 2,
    "createTime": "2019-11-14 09:57:51",
    "createBy": "罗雁夫",
    "updateTime": "2019-11-14 11:34:25",
    "updateBy": "罗雁夫"
},
```

主要取公司名称 **companyName**

### 3. 查看失败的公司, 分页

> /company/import/failedPager

除分页参数外, 还需要 batchNo=导入任务的批次号, 必要

```json
"list": [
    {
        "reason": "无法查询到授信信息",
        "companyName": "太原时维科技有限公司i"
    },
    {
        "reason": "无法查询到工商信息",
        "companyName": "太原时维科技有限公司i"
    }
]
```

- companyName : 公司名称
- reason : 失败原因

## 二. 导入, post请求

### 1. 文本框导入

> /company/importText

必要参数 `companyNames`, 支持中英文的逗号或分号隔开, 并允许输入空格, 最多5个公司名

```json
{
    "msg": "公司导入请求已提交, 请稍后查询导入结果.",
    "code": "200",
    "state": "ok"
}
```

### 2. excel 导入

> /company/importExcel

一个必要参数 `file`, 上传 excel 文件, 仅支持 xls/xlsx 两种格式

```json
{
    "msg": "公司导入请求已提交, 请稍后查询导入结果.",
    "code": "200",
    "state": "ok"
}
```

### 3. 导入未完成的任务(备用)

> /company/importAll

这个是为了处理文本导出和excel导入出现异常, 或是在导入任务执行途中, 应用被关闭, 导致导入任务队列丢失而添加的补漏触发开关, 需求中没有, 页面上可以暂不添加

无需参数

```json
{
    "msg": "公司导入请求已提交, 请稍后查询导入结果.",
    "code": "200",
    "state": "ok"
}
```

## 三. 导出下载, get请求

> /company/import/exportLog

导出共用一个接口, 通过具体参数确定导出的内容

1. **源文件**
   - type=origin
   - batchNo=某个任务的批次号
2. **成功的公司**
   - type=success
   - batchNo=某个任务的批次号
3. **失败的公司**
   - type=fail
   - batchNo=某个任务的批次号