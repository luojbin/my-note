## 变量的概念

变量是什么呢？变量就是可以指代一个具体事物的东西, 相当于给具体事物起了一个名字，然后我需要用到这个东西的时候, 不需要去详细描述这个具体的东西，而是直接使用这个名字来代替。

就好像我们以前学习数学的时候, 代数里面那个 x 一样。

在 linux/unix 的 shell 里面呢，我们就可以用这个变量来表示一些东西. 

## 变量的读取与修改

我们可以自己设置一个变量, 把一个具体的内容赋给一个变量，就是给一串具体的东西起一个名字。

在 Shell 里面, 变量的赋值语句很简单，就是一个等式，左边是变量名，等号，右边就是这个变量的内容, 等号两侧没有空格。

比如 `name=may`, 就是一个赋值语句，会把 may 这个名字赋值给name这个变量

```shell
# 赋值语句, 两端没有空格
name=may
# 可以在赋值时引用自身或者其他变量, 在已有变量的基础上做修改
name=$name.luojbin
```

当我们需要用到这个变量的内容的时候，我们就可以通过他的名字来获取它. 

echo 是shell 中的输出命令, 会将后面的内容打印到屏幕上, 我们可以通过 echo 来尝试获取这个 name 变量, 这个 `$` 就表示他后面是一个变量。

执行 `echo $name`，他就会把这个变量的值给取出来了。

```shell
# 执行echo, 会输出变量 name 的内容
echo $name
may

# 也可以使用${...}来表示读取变量, 尤其是变量与其他字母/数字直接连接时, 可以更明确指定变量的名字
# 返回空, 因为没有名为 nameluojbin 的变量
echo $nameluojbin 

# 返回 name 变量的内容, 再紧接着拼上了 luojbin 字符串
echo ${name}luojbin 
mayluojbin
```

## 变量的作用

上面介绍了 shell 中变量最基本的读写操作, 变量可以用在很多地方.

### 1. 充当占位符

变量可以作为 shell 命令或者文字内容的一部分, 相当于一个占位符, 在需要的时候填入具体的内容, 以实现不同的操作。

`touch` 是一个创建文件的命令, 我想在不同时候创建不同的文件. `file-$name.txt`相当于一个文件名模板, 可以使用变量作为模板一部分

```shell
# 使用 touch 创建文件, 由于变量name的内容是 may, 因此创建处理出来的文件全名是 file-may.txt
touch file-$name.txt

# 如果修改变量name的内容, 改成 tom, 再次执行刚才的 touch 命令, 就会创建出 file-tom.txt
name=tom
touch file-$name.txt
```

这个时候的变量，就是一个占位符, 占了一个坑, 可以塞可以变化东西进去。

### 2. 充当设置项

还有一种场景, 变量可以作为一种设置。

比如我在`~`目录下有一个程序文件叫 `hello`, 并添加了可执行权限

```shell
# ~/hello, 具有可执行权限
echo 'hello PATH'
```

直接在命令行中输入`hello`，回车执行, shell 会告诉我们找不到这个命令。

```shell
$ hello
zsh: command not found: hello
```

怎么样才能让 shell 能找到这个`hello`程序呢?

有一个叫 `PATH` 的变量, 它以冒号为分隔符, 记录了好几个目录的路径. 当我们输入一个命令的时候, shell 就会在 `PATH` 指定的目录里面去找有没有我要执行的程序, 这个 `PATH` 变量就是一种系统设置. 

为了让 shell 能找到这个 `hello` 程序, 就需要将 `hello` 所在的目录地址, 添加到 `PATH` 变量中.

```shell
# 查看之前的 PATH 变量
$ echo $PATH

# 将 hello 所在目录, 添加到 PATH 变量中
$ PATH=$PATH:~
# 查看修改后的 PATH 变量, 已经包含了 hello 所在目录~
$ echo $PATH

# 再次尝试执行 hello, 可以正确执行
$ hello
hello PATH
```

这个时候。我再去执行 `hello`，shell 就能找到正确的程序文件了。

刚才是正确的时候，他是找不到这个命令的，现在我把他加进去以后，他就可以找到了，这个就是用变量来作为一种系统设置的一种用法。

### 3. 特殊的变量

还有其他的一些特殊的变量。

`$` 是当前进程的 id. 每启动一个程序, 都会开启一个进程(某些程序可能会开启多个进程), 每个进程都会有一个编号, 也就是id, 用来区分不同的进程.

`?` 是前一条命令执行的返回结果状态码. 不同的程序返回状态码含义不一样, 要根据具体的程序作识别. 但是一般来说, 惯例都是用 0 来表示成功。所以可以用 `$?` 是否等于 0 来判断前一条命令是否执行成功.